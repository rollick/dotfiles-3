local install_cmd=('pip' 'install' '--upgrade' '--user')
local list_cmd=('pip' 'list' '--user')
local workon_home="${WORKONHOME:-${XDG_DATA_HOME:-${HOME}/.local/share}/virtualenvs}"

if [[ -n $1 ]]; then
	install_cmd=('pip' 'install' '--upgrade')
	list_cmd=('pip' 'list')
	print "Switch to $1 virtualenv..."
	source "${workon_home}/$1/bin/activate" || return 1
fi

for p in $($list_cmd |awk '{print $1}'); do
	$install_cmd $p
done

deactivate >|/dev/null
